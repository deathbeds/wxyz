name: wxyz
description: experimental widgets

commands:
  lab:
    unix: jupyter lab --no-browser --debug
  lint:
    unix: |-
      isort -rc packages \
      && black packages \
      && jlpm lint \
      && flake8 packages/ipywxyz \
      && pylint ipywxyz
  test:
    unix: |-
      pytest --nbval notebooks/API
  build:
    unix: |-
      cd packages/ipywxyz \
      && python setup.py sdist --dist-dir $PROJECT_DIR/dist/sdist \
      && cd $PROJECT_DIR \
      && conda-build -c conda-forge --output-folder dist/conda-bld conda.recipe
    env_spec: _build

env_specs:
  default:
    inherit_from:
      - wxyz
    packages:
      - black
      - flake8
      - isort
      - nbval
      - pylint
      - pytest
      - pytest-cov
  wxyz:
    packages:
      - bqplot
      - dask
      - dask >=0.18.2
      - dask-ml
      - distributed
      - importnb
      - ipywidgets
      - ipydatawidgets
      - jsonpointer
      - jupyterlab >=0.35,<0.36
      - lime
      - nodejs >=8.11,<9
      - py-xgboost
      - pyld
      - python >=3.7,<3.8
      - pyyaml
      - scikit-image
      - scikit-learn
      - scikit-mdr
      - skrebate
      - tornado <6
      - tpot
      - xgboost
      - matplotlib
      - umap-learn
      - cycler
      - pip:
          - yellowbrick
    channels:
      - conda-forge
      - defaults
  _build:
    packages:
      - conda-build
      - conda
      - python >=3.7,<3.8
      - twine
